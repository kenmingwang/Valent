<!DOCTYPE html>
<html lang=" zh-CN ">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Personal Space Game</title>
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/static/icon.png">
    <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.12.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5e158f966719b70012374cbf&product=inline-follow-buttons" async="async"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>
</head>

<body class="sideNavVisible">
  <div class="fixedHeaderContainer">
  <div class="headerWrapper wrapper">
    <header>
      <a href="/">
        <img class="logo" src="/static/icon.png">
        <h2 class="headerTitle">Personal Space</h2>
      </a>
      <div class="navigationWrapper navigationSlider">
        <nav class="slidingNav">
          <ul class="nav-site nav-site-internal">
            <li>
              <a href="" target="">
                Common Issues
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
  </div>
</div>
  <div class="navPusher">
    <div class="docMainWrapper wrapper">
      <div class="container docsNavContainer" id="docsNav">
        <nav class="toc">
          <div class="toggleNav">
            <section class="navWrapper wrapper">
              <div class="navBreadcrumb wrapper">
                <div class="navToggle" id="navToggler">
                  <i></i>
                </div>
                <h2>
                  <i>›</i>
                  <span>Component</span>
                </h2>
              </div>
              <div class="navGroups">

                

                
                <div class="navGroup navGroupActive">
                  <h3>Introduction</h3>
                  <ul>
                    
                    <li class="navListItem">
                      <a class="navItem" href="why-blade.html">Why Blade?</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="blade-design.html">Blade Design</a>
                    </li>
                    
                  </ul>
                </div>
                
                <div class="navGroup navGroupActive">
                  <h3>Quick Start</h3>
                  <ul>
                    
                    <li class="navListItem">
                      <a class="navItem" href="create-application.html">Create Application</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="create-route.html">Create Route</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="add-static-file.html">Add Static File</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="render-view.html">Render View</a>
                    </li>
                    
                  </ul>
                </div>
                
                <div class="navGroup navGroupActive">
                  <h3>Guide</h3>
                  <ul>
                    
                    <li class="navListItem">
                      <a class="navItem" href="installation.html">Installation</a>
                    </li>
                    
                    <li class="navListItem navItemActive">
                      <a class="navItem navItemActive" href="component.html">Component</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="route.html">Route</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="route-context.html">Route Context</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="request.html">HTTP Request</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="response.html">HTTP Response</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="webhook.html">WebHook</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="configuration.html">Configuration</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="templates.html">Template</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="logging.html">Logging</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="package-deploy.html">Package Deploy</a>
                    </li>
                    
                  </ul>
                </div>
                
                <div class="navGroup navGroupActive">
                  <h3>Advance</h3>
                  <ul>
                    
                    <li class="navListItem">
                      <a class="navItem" href="exception.html">Exception</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="schedule.html">Schedule Task</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="error-page.html">Error Page</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="listen-event.html">Listen Event</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="session-ext.html">Session Extension</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="custom-middleware.html">Custom Middleware</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="cli-args.html">Terminal Params</a>
                    </li>
                    
                  </ul>
                </div>
                
              </div>
            </section>
          </div>
          <script>
            var toggler = document.getElementById('navToggler');
            var nav = document.getElementById('docsNav');
            toggler.onclick = function () {
              nav.classList.toggle('docsSliderActive');
            };
          </script>
        </nav>
      </div>
      <div class="container mainContainer">
        <div class="wrapper">
          <div class="post">
            <header class="postHeader">
              <a class="edit-page-link button" href="https://github.com/lets-blade/lets-blade.github.io/edit/master/docs/en/component.md"
                target="_blank">
                Edit Page
              </a>
              <h1>Component</h1>
            </header>
            <article>
              <div>
                <p>
                  <p>The concept in the Blade is that the component is a type of <code class="highlighter-rouge">Bean</code> or object, and the framework has a simple <code class="highlighter-rouge">IOC</code> container built in to help you host them.
In this way, users can achieve object reuse when they use it, without having to use the <code class="highlighter-rouge">new</code> keyword infinitely to bring memory leaks. Then we are using components
There are two things to do: 1. Create a component 2. Let the Blade host the component.</p>

<h2 id="core-feature">Core feature</h2>

<p>Resident memory, our components are actually stored in the cache pool as a singleton after being hosted by the framework, and can be taken out when used.</p>

<h2 id="component-type">Component type</h2>

<p>For the simpler aspect of the user, there are several component types built into the Blade, <code class="highlighter-rouge">BladeLoader</code>, <code class="highlighter-rouge">WebHook</code>, and controller.
So let’s take a look at what these are doing here?</p>

<p><strong>BladeLoader</strong></p>

<p>In a web development we often use some <strong>configuration</strong> or some other things when the project starts.
In the Blade design an interface <code class="highlighter-rouge">BladeLoader</code>, you only need to create a class to implement this interface to complete the initialization of the loading action.
For example, I want to set the template engine when the project starts:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Order</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="nd">@Bean</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TemplateConfig</span> <span class="kd">implements</span> <span class="n">BladeLoader</span> <span class="o">{</span>
    
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">load</span><span class="o">(</span><span class="n">Blade</span> <span class="n">blade</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">JetbrickTemplateEngine</span> <span class="n">templateEngine</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JetbrickTemplateEngine</span><span class="o">();</span>
        <span class="n">blade</span><span class="o">.</span><span class="na">templateEngine</span><span class="o">(</span><span class="n">templateEngine</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>So a few lines of code help us implement such a function, we can notice that the <code class="highlighter-rouge">processor</code> method is implemented here.
And there are 2 annotations on the component, we use the <code class="highlighter-rouge">@Bean</code> annotation to tell the framework that this is a component, you will help it host it for me.
In the IOC container. But I have multiple components, I hope they are executed in order, so I added a <code class="highlighter-rouge">@Order</code> annotation.
At the same time, the order of this component is specified as <code class="highlighter-rouge">1</code>, then the framework will execute the <code class="highlighter-rouge">processor</code> methods of all components in order.</p>

<p><strong>WebHook</strong></p>

<p><code class="highlighter-rouge">WebHook</code> is an interface in the Blade that can perform some custom actions before and after intercepting a route. Users can use this interface to perform some operations such as login interception, log record, and permission verification.
There are 2 methods <code class="highlighter-rouge">before</code> and <code class="highlighter-rouge">after</code> in this interface, and the <code class="highlighter-rouge">after</code> method is a <strong>default method</strong> (this concept appears in Java8) because we
It is found that in most cases, the <code class="highlighter-rouge">after</code> method is not used, then the user only needs to implement <code class="highlighter-rouge">before</code> when implementing the interface.
Let’s write a simple example to experience:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyHook</span> <span class="kd">implements</span> <span class="n">WebHook</span> <span class="o">{</span>
    
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">before</span><span class="o">(</span><span class="n">Signature</span> <span class="n">signature</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="n">signature</span><span class="o">.</span><span class="na">request</span><span class="o">();</span>
        <span class="n">String</span>  <span class="n">uri</span>     <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">uri</span><span class="o">();</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"{}\t{}"</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(),</span> <span class="n">uri</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>Here is a simple log of the log, we can see a <code class="highlighter-rouge">WebHook</code> (hook) method has a <code class="highlighter-rouge">Signature</code>. We packaged the context parameters of the current route in this class.
These context parameters include: <code class="highlighter-rouge">Request</code>, <code class="highlighter-rouge">Response</code>, <code class="highlighter-rouge">Action</code> for the user to use.</p>

<p><strong>Controller</strong></p>

<p>Identifying a class in Blade is a very simple controller class. You only need to add a <code class="highlighter-rouge">@Path</code> annotation to the class. In order not to make the configuration of the class too complicated, we allow the user to not have <code class="highlighter-rouge">@Bean on the class. </code>
  The annotation is actually the framework to help you. The advantage of this is that you can use <code class="highlighter-rouge">@Path</code> to configure some features of this controller, such as <code class="highlighter-rouge">namespace</code>, <code class="highlighter-rouge">restful</code> parameters, and so on.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Path</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">IndexController</span> <span class="o">{</span>
    
<span class="o">}</span>
</code></pre></div></div>

<p>This <code class="highlighter-rouge">IndexController</code> is considered by the Blade to be a controller, which is hosted at startup. When you access a route, it will find the object and get reused.</p>

<p><strong>Custom component</strong></p>

<p>Many times we have some of our own business, we need to customize some services like <code class="highlighter-rouge">Service</code>. Simplify the concept in Blade and think that all components are a <code class="highlighter-rouge">Bean</code>.</p>

<p>Then I can create a component like this:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
    
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">sayHi</span><span class="o">(){</span>
        <span class="k">return</span> <span class="s">"Hi blade"</span><span class="o">;</span>    
    <span class="o">}</span>
    
<span class="o">}</span>
</code></pre></div></div>

<p>When I want to use this component in the controller it is also very simple:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Path</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">IndexController</span> <span class="o">{</span>
    
    <span class="nd">@Inject</span>
    <span class="kd">private</span> <span class="n">UserService</span> <span class="n">userService</span><span class="o">;</span>
    
    <span class="nd">@GetRoute</span><span class="o">(</span><span class="s">"/sayhi"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHi</span><span class="o">(){</span>
        <span class="n">userService</span><span class="o">.</span><span class="na">sayHi</span><span class="o">();</span>
    <span class="o">}</span>
    
<span class="o">}</span>
</code></pre></div></div>

<p>Inject a component we defined with the <code class="highlighter-rouge">@Inject</code> annotation, as well as the calling of components and components.</p>

<h2 id="built-in-component">Built-in component</h2>
<p> 
In order to allow developers to spend less time developing core business, Blade has built-in ** components** for you to use.</p>

<ol>
  <li><code class="highlighter-rouge">DefaultExceptionHandler</code>: Exception handler, you can inherit it if you have custom exception handling.</li>
  <li><code class="highlighter-rouge">BasicAuthMiddleware</code>: Basic authentication, if used, can be used directly.</li>
  <li><code class="highlighter-rouge">CsrfMiddleware</code>: Helps you verify <code class="highlighter-rouge">CSRF Token</code></li>
</ol>

                </p>
              </div>
            </article>
          </div>
          <!-- <div class="docs-prevnext">
            <a class="docs-next button" href="why-prettier.html">Why Prettier? →</a>
          </div> -->
        </div>
      </div>
    </div>
    <script id="twitter-wjs" sync src="https://platform.twitter.com/widgets.js"></script>
<script type="text/javascript" sync src="https://buttons.github.io/buttons.js"></script>

<footer class="footerSection nav-footer" id="footer">
    <section class="sitemap">
        <a href="/" class="nav-home">
            <img src="/static/icon.png" alt="Blade">
        </a>
        <div>
            <h5>Social Media</h5>
            <a href="https://twitter.com/PastelPeaks">@PastelPeaks on Twitter</a>
            <object type="image/svg+xml" data="https://img.shields.io/twitter/follow/PastelPeaks.svg?label=Follow+PastelPeaks&amp;style=social">
                <a href="https://twitter.com/intent/follow?screen_name=PastelPeaks">
                    <img alt="Follow us on Twitter" src="https://img.shields.io/twitter/follow/PastelPeaks.png?label=Follow+PastelPeaks&amp;style=social">
                </a>
            </object>
            <a href="https://www.instagram.com/PersonalSpaceGame/">@PersonalSpaceGame on Instagram</a>
        </div>
        <div>
            <img id="ulogo_pc" src="https://d1ggkj0laysj3f.cloudfront.net/wp-content/uploads/2018/10/29154938/GamerU-white-e1540850013969.png" 
            alt="University of Utah Logo"
            style="width: 25%; float: right;">

            <img id="ulogo_mobile" src="https://d1ggkj0laysj3f.cloudfront.net/wp-content/uploads/2018/10/29154938/GamerU-white-e1540850013969.png" 
            alt="University of Utah Logo"
            style="width: 25%;">
        </div>
    </section>
</footer>

<script>
    function _isMobile() {
        // if we want a more complete list use this: http://detectmobilebrowsers.com/
        // str.test() is more efficent than str.match()
        // remember str.test is case sensitive
        var isMobile = (/iphone|ipod|android|ie|blackberry|fennec/).test
            (navigator.userAgent.toLowerCase());
        return isMobile;
    }

    if (_isMobile()) {
        document.getElementById("ulogo_pc").style.display = "none";
    }
    else {
        document.getElementById("ulogo_mobile").style.display = "none";
    }

</script>
  </div>
</body>

</html>