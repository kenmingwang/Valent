<!DOCTYPE html>
<html lang=" zh-CN ">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Personal Space Game</title>
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/static/icon.png">
    <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.12.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5e158f966719b70012374cbf&product=inline-follow-buttons" async="async"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad();
    </script>
</head>

<body class="sideNavVisible">
  <div class="fixedHeaderContainer">
  <div class="headerWrapper wrapper">
    <header>
      <a href="/">
        <img class="logo" src="/static/icon.png">
        <h2 class="headerTitle">Personal Space</h2>
      </a>
      <div class="navigationWrapper navigationSlider">
        <nav class="slidingNav">
          <ul class="nav-site nav-site-internal">
            <li>
              <a href="" target="">
                Common Issues
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
  </div>
</div>
  <div class="navPusher">
    <div class="docMainWrapper wrapper">
      <div class="container docsNavContainer" id="docsNav">
        <nav class="toc">
          <div class="toggleNav">
            <section class="navWrapper wrapper">
              <div class="navBreadcrumb wrapper">
                <div class="navToggle" id="navToggler">
                  <i></i>
                </div>
                <h2>
                  <i>›</i>
                  <span>HTTP Request</span>
                </h2>
              </div>
              <div class="navGroups">

                

                
                <div class="navGroup navGroupActive">
                  <h3>Introduction</h3>
                  <ul>
                    
                    <li class="navListItem">
                      <a class="navItem" href="why-blade.html">Why Blade?</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="blade-design.html">Blade Design</a>
                    </li>
                    
                  </ul>
                </div>
                
                <div class="navGroup navGroupActive">
                  <h3>Quick Start</h3>
                  <ul>
                    
                    <li class="navListItem">
                      <a class="navItem" href="create-application.html">Create Application</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="create-route.html">Create Route</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="add-static-file.html">Add Static File</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="render-view.html">Render View</a>
                    </li>
                    
                  </ul>
                </div>
                
                <div class="navGroup navGroupActive">
                  <h3>Guide</h3>
                  <ul>
                    
                    <li class="navListItem">
                      <a class="navItem" href="installation.html">Installation</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="component.html">Component</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="route.html">Route</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="route-context.html">Route Context</a>
                    </li>
                    
                    <li class="navListItem navItemActive">
                      <a class="navItem navItemActive" href="request.html">HTTP Request</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="response.html">HTTP Response</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="webhook.html">WebHook</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="configuration.html">Configuration</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="templates.html">Template</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="logging.html">Logging</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="package-deploy.html">Package Deploy</a>
                    </li>
                    
                  </ul>
                </div>
                
                <div class="navGroup navGroupActive">
                  <h3>Advance</h3>
                  <ul>
                    
                    <li class="navListItem">
                      <a class="navItem" href="exception.html">Exception</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="schedule.html">Schedule Task</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="error-page.html">Error Page</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="listen-event.html">Listen Event</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="session-ext.html">Session Extension</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="custom-middleware.html">Custom Middleware</a>
                    </li>
                    
                    <li class="navListItem">
                      <a class="navItem" href="cli-args.html">Terminal Params</a>
                    </li>
                    
                  </ul>
                </div>
                
              </div>
            </section>
          </div>
          <script>
            var toggler = document.getElementById('navToggler');
            var nav = document.getElementById('docsNav');
            toggler.onclick = function () {
              nav.classList.toggle('docsSliderActive');
            };
          </script>
        </nav>
      </div>
      <div class="container mainContainer">
        <div class="wrapper">
          <div class="post">
            <header class="postHeader">
              <a class="edit-page-link button" href="https://github.com/lets-blade/lets-blade.github.io/edit/master/docs/en/request.md"
                target="_blank">
                Edit Page
              </a>
              <h1>HTTP Request</h1>
            </header>
            <article>
              <div>
                <p>
                  <p>The Blade supports annotations or uses the <code class="highlighter-rouge">Request</code> object to get the request information.
 </p>
<h2 id="form-parameters">Form parameters</h2>

<p>First look at the API for the action form parameters provided by <code class="highlighter-rouge">Request</code></p>

<ul>
  <li><code class="highlighter-rouge">Optional&lt;String&gt; query(String name)</code></li>
  <li><code class="highlighter-rouge">Optional&lt;Integer&gt; queryInt(String name)</code></li>
  <li><code class="highlighter-rouge">Optional&lt;Long&gt; queryLong(String name)</code></li>
  <li><code class="highlighter-rouge">Optional&lt;Double&gt; queryDouble(String name)</code></li>
  <li><code class="highlighter-rouge">String query(String name, String defaultValue)</code></li>
  <li><code class="highlighter-rouge">int queryInt(String name, int defaultValue)</code></li>
  <li><code class="highlighter-rouge">long queryLong(String name, long defaultValue)</code></li>
  <li><code class="highlighter-rouge">double queryDouble(String name, double defaultValue)</code></li>
</ul>

<p>These sets of APIs are very clear and clear. Because Java8 is used, there is a set of <code class="highlighter-rouge">Optional</code> written in it. In order to make judgments or other processing when you can’t get the value, it is similar to the API with <code class="highlighter-rouge">defaultValue</code>. Because <code class="highlighter-rouge">Optional</code> provides an <code class="highlighter-rouge">orElse</code> method that lets you set default values. How to use it? In fact, as long as the API design is in place, you can guess how to use it. What I can tell you is that this set of APIs gets the parameters of the <code class="highlighter-rouge">Form</code> form.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  http://localhost:9000/save <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'username=Jack'</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostRoute</span><span class="o">(</span><span class="s">"/save"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">formParams</span><span class="o">(</span><span class="nd">@Param</span> <span class="n">String</span> <span class="n">username</span><span class="o">){</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostRoute</span><span class="o">(</span><span class="s">"/save"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">formParams</span><span class="o">(</span><span class="n">Request</span> <span class="n">request</span><span class="o">){</span>
    <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="s">"default value"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Get <code class="highlighter-rouge">Integer</code> data: <code class="highlighter-rouge">request.queryInt("xxx")</code></li>
  <li>Get <code class="highlighter-rouge">Long</code> data: <code class="highlighter-rouge">request.queryLong("xxx")</code></li>
  <li>Get <code class="highlighter-rouge">Double</code> data: <code class="highlighter-rouge">request.queryDouble("xxx")</code></li>
</ul>

<h2 id="json-data">JSON data</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="se">\</span>
  <span class="nt">-X</span> POST <span class="se">\</span>
  http://localhost:9000/users <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{"name":"biezhi","email":"biezhi.me@gmail.com"}'</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="c1">// getter setter 省略</span>
<span class="o">}</span>

<span class="nd">@PostRoute</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">bodyParams</span><span class="o">(</span><span class="nd">@BodyParam</span> <span class="n">User</span> <span class="n">user</span><span class="o">){</span>
    
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostRoute</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">bodyParams</span><span class="o">(</span><span class="n">Request</span> <span class="n">request</span><span class="o">){</span>
    <span class="n">String</span> <span class="n">bodyString</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">bodyToString</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="path-parameter">Path parameter</h2>

<p>We also often use the REST interface, generally its URL is like: http://www.exmaple.com/users/128</p>

<p>At this time, the route Path we defined in Blade is <code class="highlighter-rouge">/users/:id</code>. How to get this id? The following API can help you.</p>

<ul>
  <li><code class="highlighter-rouge">String pathString(String name)</code></li>
  <li><code class="highlighter-rouge">String pathInt(String name)</code></li>
  <li><code class="highlighter-rouge">String pathLong(String name)</code></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Integer</span> <span class="n">userId</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">pathInt</span><span class="o">(</span><span class="s">"id"</span><span class="o">);</span>
</code></pre></div></div>

<p>This way you can get <code class="highlighter-rouge">userId</code>, and other variables can be obtained by closing your eyes.</p>

<p>You can also use annotations</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GetRoute</span><span class="o">(</span><span class="s">"/user/:uid"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">user</span><span class="o">(</span><span class="nd">@PathParam</span> <span class="n">Integer</span> <span class="n">uid</span><span class="o">){</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="parameter-binding">Parameter binding</h2>
<p> 
Blade supports binding parameters to a model object, you can use it like this</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="c1">// getter setter omit</span>
<span class="o">}</span>

<span class="nd">@PostRoute</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">bodyParams</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">){</span>
    
<span class="o">}</span>
</code></pre></div></div>

<p>The form parameters received at this time or the <code class="highlighter-rouge">JSON</code> parameter of <code class="highlighter-rouge">Request Body</code> will be automatically mapped to a <code class="highlighter-rouge">User</code> object.</p>

<h2 id="custom-binding">Custom binding</h2>

<p>If you want to customize the binding data, such as <code class="highlighter-rouge">ruby</code>, specify a class name in the <code class="highlighter-rouge">input</code> text box to be matched,
Can be like this:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"ie=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;form&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"user[name]"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"user[age]"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostRoute</span><span class="o">(</span><span class="s">"/save"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">customBind</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"user"</span><span class="o">)</span> <span class="n">User</span> <span class="n">user</span><span class="o">){</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="read-header">Read header</h2>

<p>Still looking at the API, although I have been repeating the API, because the API written by the framework is to provide convenience to users.</p>

<ul>
  <li><code class="highlighter-rouge">Map&lt;String, String&gt; headers()</code></li>
  <li><code class="highlighter-rouge">String header(String name)</code></li>
  <li><code class="highlighter-rouge">String header(String name, String defaultValue)</code></li>
  <li><code class="highlighter-rouge">boolean isIE()</code></li>
  <li><code class="highlighter-rouge">boolean isAjax()</code></li>
  <li><code class="highlighter-rouge">String contentType()</code></li>
  <li><code class="highlighter-rouge">String userAgent()</code></li>
</ul>

<p>In addition to the method of getting <code class="highlighter-rouge">header</code>, the API above also provides several commonly used attachment methods for getting IE browser, Ajax request, ContentType and UserAgent.</p>

<h2 id="read-cookie">Read Cookie</h2>

<ul>
  <li><code class="highlighter-rouge">Map&lt;String, String&gt; cookies()</code></li>
  <li><code class="highlighter-rouge">Optional&lt;Cookie&gt; cookieRaw(String name)</code></li>
  <li><code class="highlighter-rouge">String cookie(String name, String defaultValue)</code></li>
</ul>

<p>Here are a few methods to introduce, the first is to get all the cookies, the map key is the cookie name, the value is the cookie value; the second method gets the cookie according to the name, here you can get the details of the cookie, including path, Validity period, etc.; the last method gets the cookie by name, and if it doesn’t, it sets a default value.</p>

<h2 id="setting-data">Setting data</h2>

<p>Many times we will use the template engine, even if you have not used at least know JSP, we will set some data in the Request scope, and then get it in the template. The same is true in Blade, and the API is simple.</p>

<ul>
  <li><code class="highlighter-rouge">attribute(String name, Object value)</code></li>
  <li><code class="highlighter-rouge">T attribute(String name)</code></li>
</ul>

<p>The first method here is to set a data like the Request field, the second method to get a data from the Request field, as to how the data set here is used in the front end depends on which template engine you use, according to its syntax, such as the default The template engine is very simple, let’s take an example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">request</span><span class="o">.</span><span class="na">attribute</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"blade2.0"</span><span class="o">);</span>
</code></pre></div></div>

<p>In template (view files stored under <code class="highlighter-rouge">/resources/templates</code>)</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>This is ${name}<span class="nt">&lt;/h1&gt;</span>
</code></pre></div></div>

<h2 id="session">Session</h2>

<ul>
  <li><code class="highlighter-rouge">request.session()</code></li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Session</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">session</span><span class="o">();</span>
<span class="c1">// write to session</span>
<span class="n">session</span><span class="o">.</span><span class="na">attribute</span><span class="o">(</span><span class="s">"LOGIN_USER"</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>

<span class="c1">// read from session</span>
<span class="n">String</span> <span class="n">hello</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">attribute</span><span class="o">(</span><span class="s">"hello"</span><span class="o">);</span>
</code></pre></div></div>

                </p>
              </div>
            </article>
          </div>
          <!-- <div class="docs-prevnext">
            <a class="docs-next button" href="why-prettier.html">Why Prettier? →</a>
          </div> -->
        </div>
      </div>
    </div>
    <script id="twitter-wjs" sync src="https://platform.twitter.com/widgets.js"></script>
<script type="text/javascript" sync src="https://buttons.github.io/buttons.js"></script>

<footer class="footerSection nav-footer" id="footer">
    <section class="sitemap">
        <a href="/" class="nav-home">
            <img src="/static/icon.png" alt="Blade">
        </a>
        <div>
            <h5>Social Media</h5>
            <a href="https://twitter.com/PastelPeaks">@PastelPeaks on Twitter</a>
            <object type="image/svg+xml" data="https://img.shields.io/twitter/follow/PastelPeaks.svg?label=Follow+PastelPeaks&amp;style=social">
                <a href="https://twitter.com/intent/follow?screen_name=PastelPeaks">
                    <img alt="Follow us on Twitter" src="https://img.shields.io/twitter/follow/PastelPeaks.png?label=Follow+PastelPeaks&amp;style=social">
                </a>
            </object>
            <a href="https://www.instagram.com/PersonalSpaceGame/">@PersonalSpaceGame on Instagram</a>
        </div>
        <div>
            <img id="ulogo_pc" src="https://d1ggkj0laysj3f.cloudfront.net/wp-content/uploads/2018/10/29154938/GamerU-white-e1540850013969.png" 
            alt="University of Utah Logo"
            style="width: 25%; float: right;">

            <img id="ulogo_mobile" src="https://d1ggkj0laysj3f.cloudfront.net/wp-content/uploads/2018/10/29154938/GamerU-white-e1540850013969.png" 
            alt="University of Utah Logo"
            style="width: 25%;">
        </div>
    </section>
</footer>

<script>
    function _isMobile() {
        // if we want a more complete list use this: http://detectmobilebrowsers.com/
        // str.test() is more efficent than str.match()
        // remember str.test is case sensitive
        var isMobile = (/iphone|ipod|android|ie|blackberry|fennec/).test
            (navigator.userAgent.toLowerCase());
        return isMobile;
    }

    if (_isMobile()) {
        document.getElementById("ulogo_pc").style.display = "none";
    }
    else {
        document.getElementById("ulogo_mobile").style.display = "none";
    }

</script>
  </div>
</body>

</html>